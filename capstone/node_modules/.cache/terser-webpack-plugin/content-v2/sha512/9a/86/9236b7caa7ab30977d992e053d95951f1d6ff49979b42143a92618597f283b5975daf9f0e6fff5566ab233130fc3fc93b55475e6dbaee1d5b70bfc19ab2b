{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{fplk:function(l,n,u){\"use strict\";u.r(n);var e=u(\"CcnG\"),t=u(\"xdv0\"),o=(u(\"OO+k\"),function(l,n,u,e){return new(u||(u=Promise))(function(t,o){function i(l){try{a(e.next(l))}catch(n){o(n)}}function r(l){try{a(e.throw(l))}catch(n){o(n)}}function a(l){l.done?t(l.value):new u(function(n){n(l.value)}).then(i,r)}a((e=e.apply(l,n||[])).next())})}),i=function(l,n){var u,e,t,o,i={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function r(o){return function(r){return function(o){if(u)throw new TypeError(\"Generator is already executing.\");for(;i;)try{if(u=1,e&&(t=2&o[0]?e.return:o[0]?e.throw||((t=e.return)&&t.call(e),0):e.next)&&!(t=t.call(e,o[1])).done)return t;switch(e=0,t&&(o=[2&o[0],t.value]),o[0]){case 0:case 1:t=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,e=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(t=(t=i.trys).length>0&&t[t.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!t||o[1]>t[0]&&o[1]<t[3])){i.label=o[1];break}if(6===o[0]&&i.label<t[1]){i.label=t[1],t=o;break}if(t&&i.label<t[2]){i.label=t[2],i.ops.push(o);break}t[2]&&i.ops.pop(),i.trys.pop();continue}o=n.call(l,i)}catch(r){o=[6,r],e=0}finally{u=t=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,r])}}},r=function(){function l(l,n,u,e,t){var o=this;this.http=l,this.afs=n,this.router=u,this.alertController=e,this.user=t,this.busy=!1,this.mainuser=n.doc(\"users/\"+t.getUID()),this.sub=this.mainuser.valueChanges().subscribe(function(l){o.username=l.username,o.profilePic=l.profilePic})}return l.prototype.ngOnInit=function(){},l.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},l.prototype.updateProfilePic=function(){this.fileBtn.nativeElement.click()},l.prototype.uploadPic=function(l){var n=this,u=l.target.files,e=new FormData;e.append(\"file\",u[0]),e.append(\"UPLOADCARE_STORE\",\"1\"),e.append(\"UPLOADCARE_PUB_KEY\",\"ada5e3cb2da06dee6d82\"),this.http.post(\"https://upload.uploadcare.com/base/\",e).subscribe(function(l){var u=l.json().file;n.mainuser.update({profilePic:u})})},l.prototype.presentAlert=function(l,n){return o(this,void 0,void 0,function(){return i(this,function(u){switch(u.label){case 0:return[4,this.alertController.create({header:l,message:n,buttons:[\"OK\"]})];case 1:return[4,u.sent().present()];case 2:return u.sent(),[2]}})})},l.prototype.updateDetails=function(){return o(this,void 0,void 0,function(){return i(this,function(l){switch(l.label){case 0:if(this.busy=!0,!this.password)return this.busy=!1,[2,this.presentAlert(\"Error!\",\"You have to enter a password\")];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.user.reAuth(this.user.getUsername(),this.password)];case 2:return l.sent(),[3,4];case 3:return l.sent(),this.busy=!1,[2,this.presentAlert(\"Error!\",\"Wrong password!\")];case 4:return this.newpassword?[4,this.user.updatePassword(this.newpassword)]:[3,6];case 5:l.sent(),l.label=6;case 6:return this.username===this.user.getUsername()?[3,8]:[4,this.user.updateEmail(this.username)];case 7:l.sent(),this.mainuser.update({username:this.username}),l.label=8;case 8:return this.password=\"\",this.newpassword=\"\",this.busy=!1,[4,this.presentAlert(\"Done!\",\"Your profile was updated!\")];case 9:return l.sent(),this.router.navigate([\"/tabs/feed\"]),[2]}})})},l}(),a=function(){return function(){}}(),s=u(\"pMnS\"),b=u(\"CjzJ\"),c=u(\"f/hT\"),p=u(\"ra/t\"),d=u(\"ntG5\"),h=u(\"Zq1E\"),f=u(\"gIcY\"),g=u(\"CI40\"),v=u(\"fHOL\"),C=u(\"tXrQ\"),m=u(\"Ip0R\"),k=u(\"sE5F\"),w=u(\"fvl4\"),y=u(\"ZYCi\"),z=u(\"CssM\"),P=e.nb({encapsulation:0,styles:[[\".filebtn[_ngcontent-%COMP%]{opacity:0;position:absolute;top:-100em;left:-100em}.profile-pic[_ngcontent-%COMP%]{width:200px;height:200px}\"]],data:{}});function x(l){return e.Eb(0,[(l()(),e.pb(0,0,null,null,1,\"app-loading\",[],null,null,null,b.b,b.a)),e.ob(1,114688,null,0,c.a,[],null,null)],function(l,n){l(n,1,0)},null)}function E(l){return e.Eb(0,[(l()(),e.pb(0,0,null,null,44,\"div\",[],null,null,null,null,null)),(l()(),e.pb(1,0,[[1,0],[\"fileBtn\",1]],null,0,\"input\",[[\"class\",\"filebtn\"],[\"type\",\"file\"]],null,[[null,\"change\"]],function(l,n,u){var e=!0;return\"change\"===n&&(e=!1!==l.component.uploadPic(u)&&e),e},null,null)),(l()(),e.pb(2,0,null,null,2,\"div\",[],null,null,null,null,null)),(l()(),e.pb(3,0,null,null,1,\"ion-img\",[[\"class\",\"profile-pic\"]],null,[[null,\"click\"]],function(l,n,u){var e=!0;return\"click\"===n&&(e=!1!==l.component.updateProfilePic()&&e),e},p.O,p.o)),e.ob(4,49152,null,0,d.y,[e.h,e.k],{src:[0,\"src\"]},null),(l()(),e.pb(5,0,null,null,39,\"div\",[[\"class\",\"profile-info\"]],null,null,null,null,null)),(l()(),e.pb(6,0,null,null,11,\"ion-item\",[],null,null,null,p.Q,p.q)),e.ob(7,49152,null,0,d.C,[e.h,e.k],null,null),(l()(),e.pb(8,0,null,0,2,\"ion-label\",[[\"position\",\"floating\"]],null,null,null,p.R,p.r)),e.ob(9,49152,null,0,d.I,[e.h,e.k],{position:[0,\"position\"]},null),(l()(),e.Db(-1,0,[\"Username\"])),(l()(),e.pb(11,0,null,0,6,\"ion-input\",[],[[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"ngModelChange\"],[null,\"ionBlur\"],[null,\"ionChange\"]],function(l,n,u){var t=!0,o=l.component;return\"ionBlur\"===n&&(t=!1!==e.zb(l,12)._handleBlurEvent()&&t),\"ionChange\"===n&&(t=!1!==e.zb(l,12)._handleInputEvent(u.target.value)&&t),\"ngModelChange\"===n&&(t=!1!==(o.username=u)&&t),t},p.P,p.p)),e.ob(12,16384,null,0,h.a,[e.k],null,null),e.Ab(1024,null,f.b,function(l){return[l]},[h.a]),e.ob(14,671744,null,0,f.e,[[8,null],[8,null],[8,null],[6,f.b]],{model:[0,\"model\"]},{update:\"ngModelChange\"}),e.Ab(2048,null,f.c,null,[f.e]),e.ob(16,16384,null,0,f.d,[[4,f.c]],null,null),e.ob(17,49152,null,0,d.B,[e.h,e.k],null,null),(l()(),e.pb(18,0,null,null,11,\"ion-item\",[],null,null,null,p.Q,p.q)),e.ob(19,49152,null,0,d.C,[e.h,e.k],null,null),(l()(),e.pb(20,0,null,0,2,\"ion-label\",[[\"position\",\"floating\"]],null,null,null,p.R,p.r)),e.ob(21,49152,null,0,d.I,[e.h,e.k],{position:[0,\"position\"]},null),(l()(),e.Db(-1,0,[\"New Password?\"])),(l()(),e.pb(23,0,null,0,6,\"ion-input\",[],[[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"ngModelChange\"],[null,\"ionBlur\"],[null,\"ionChange\"]],function(l,n,u){var t=!0,o=l.component;return\"ionBlur\"===n&&(t=!1!==e.zb(l,24)._handleBlurEvent()&&t),\"ionChange\"===n&&(t=!1!==e.zb(l,24)._handleInputEvent(u.target.value)&&t),\"ngModelChange\"===n&&(t=!1!==(o.newpassword=u)&&t),t},p.P,p.p)),e.ob(24,16384,null,0,h.a,[e.k],null,null),e.Ab(1024,null,f.b,function(l){return[l]},[h.a]),e.ob(26,671744,null,0,f.e,[[8,null],[8,null],[8,null],[6,f.b]],{model:[0,\"model\"]},{update:\"ngModelChange\"}),e.Ab(2048,null,f.c,null,[f.e]),e.ob(28,16384,null,0,f.d,[[4,f.c]],null,null),e.ob(29,49152,null,0,d.B,[e.h,e.k],null,null),(l()(),e.pb(30,0,null,null,11,\"ion-item\",[],null,null,null,p.Q,p.q)),e.ob(31,49152,null,0,d.C,[e.h,e.k],null,null),(l()(),e.pb(32,0,null,0,2,\"ion-label\",[[\"position\",\"floating\"]],null,null,null,p.R,p.r)),e.ob(33,49152,null,0,d.I,[e.h,e.k],{position:[0,\"position\"]},null),(l()(),e.Db(-1,0,[\"Enter old password\"])),(l()(),e.pb(35,0,null,0,6,\"ion-input\",[],[[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"ngModelChange\"],[null,\"ionBlur\"],[null,\"ionChange\"]],function(l,n,u){var t=!0,o=l.component;return\"ionBlur\"===n&&(t=!1!==e.zb(l,36)._handleBlurEvent()&&t),\"ionChange\"===n&&(t=!1!==e.zb(l,36)._handleInputEvent(u.target.value)&&t),\"ngModelChange\"===n&&(t=!1!==(o.password=u)&&t),t},p.P,p.p)),e.ob(36,16384,null,0,h.a,[e.k],null,null),e.Ab(1024,null,f.b,function(l){return[l]},[h.a]),e.ob(38,671744,null,0,f.e,[[8,null],[8,null],[8,null],[6,f.b]],{model:[0,\"model\"]},{update:\"ngModelChange\"}),e.Ab(2048,null,f.c,null,[f.e]),e.ob(40,16384,null,0,f.d,[[4,f.c]],null,null),e.ob(41,49152,null,0,d.B,[e.h,e.k],null,null),(l()(),e.pb(42,0,null,null,2,\"ion-button\",[[\"color\",\"dark\"],[\"expand\",\"block\"],[\"fill\",\"solid\"]],null,[[null,\"click\"]],function(l,n,u){var e=!0;return\"click\"===n&&(e=!1!==l.component.updateDetails()&&e),e},p.C,p.c)),e.ob(43,49152,null,0,d.f,[e.h,e.k],{color:[0,\"color\"],expand:[1,\"expand\"],fill:[2,\"fill\"]},null),(l()(),e.Db(-1,0,[\"Save\"]))],function(l,n){var u=n.component;l(n,4,0,e.rb(1,\"https://ucarecdn.com/\",u.profilePic,\"/-/scale_crop/150x150/center/\")),l(n,9,0,\"floating\"),l(n,14,0,u.username),l(n,21,0,\"floating\"),l(n,26,0,u.newpassword),l(n,33,0,\"floating\"),l(n,38,0,u.password),l(n,43,0,\"dark\",\"block\",\"solid\")},function(l,n){l(n,11,0,e.zb(n,16).ngClassUntouched,e.zb(n,16).ngClassTouched,e.zb(n,16).ngClassPristine,e.zb(n,16).ngClassDirty,e.zb(n,16).ngClassValid,e.zb(n,16).ngClassInvalid,e.zb(n,16).ngClassPending),l(n,23,0,e.zb(n,28).ngClassUntouched,e.zb(n,28).ngClassTouched,e.zb(n,28).ngClassPristine,e.zb(n,28).ngClassDirty,e.zb(n,28).ngClassValid,e.zb(n,28).ngClassInvalid,e.zb(n,28).ngClassPending),l(n,35,0,e.zb(n,40).ngClassUntouched,e.zb(n,40).ngClassTouched,e.zb(n,40).ngClassPristine,e.zb(n,40).ngClassDirty,e.zb(n,40).ngClassValid,e.zb(n,40).ngClassInvalid,e.zb(n,40).ngClassPending)})}function B(l){return e.Eb(0,[e.Bb(671088640,1,{fileBtn:0}),(l()(),e.pb(1,0,null,null,11,\"ion-header\",[],null,null,null,p.M,p.m)),e.ob(2,49152,null,0,d.w,[e.h,e.k],null,null),(l()(),e.pb(3,0,null,0,9,\"ion-toolbar\",[[\"color\",\"primary\"]],null,null,null,p.Z,p.z)),e.ob(4,49152,null,0,d.vb,[e.h,e.k],{color:[0,\"color\"]},null),(l()(),e.pb(5,0,null,0,4,\"ion-buttons\",[[\"slot\",\"start\"]],null,null,null,p.D,p.d)),e.ob(6,49152,null,0,d.g,[],null,null),(l()(),e.pb(7,0,null,0,2,\"ion-back-button\",[[\"defaultHref\",\"/tabs/profile\"]],null,[[null,\"click\"]],function(l,n,u){var t=!0;return\"click\"===n&&(t=!1!==e.zb(l,9).onClick(u)&&t),t},p.B,p.b)),e.ob(8,49152,null,0,d.c,[e.h,e.k],{defaultHref:[0,\"defaultHref\"]},null),e.ob(9,16384,null,0,g.a,[[2,v.a],C.a,e.k],{defaultHref:[0,\"defaultHref\"]},null),(l()(),e.pb(10,0,null,0,2,\"ion-title\",[[\"color\",\"light\"]],null,null,null,p.Y,p.y)),e.ob(11,49152,null,0,d.tb,[e.h,e.k],{color:[0,\"color\"]},null),(l()(),e.Db(-1,0,[\"Edit Profile\"])),(l()(),e.pb(13,0,null,null,5,\"ion-content\",[[\"color\",\"dark\"],[\"padding\",\"\"]],null,null,null,p.H,p.h)),e.ob(14,49152,null,0,d.p,[e.h,e.k],{color:[0,\"color\"]},null),(l()(),e.gb(16777216,null,0,1,null,x)),e.ob(16,16384,null,0,m.i,[e.O,e.L],{ngIf:[0,\"ngIf\"]},null),(l()(),e.gb(16777216,null,0,1,null,E)),e.ob(18,16384,null,0,m.i,[e.O,e.L],{ngIf:[0,\"ngIf\"]},null)],function(l,n){var u=n.component;l(n,4,0,\"primary\"),l(n,8,0,\"/tabs/profile\"),l(n,9,0,\"/tabs/profile\"),l(n,11,0,\"light\"),l(n,14,0,\"dark\"),l(n,16,0,u.busy),l(n,18,0,!u.busy)},null)}function I(l){return e.Eb(0,[(l()(),e.pb(0,0,null,null,1,\"app-edit-profile\",[],null,null,null,B,P)),e.ob(1,245760,null,0,r,[k.d,w.a,y.m,z.a,t.a],null,null)],function(l,n){l(n,1,0)},null)}var D=e.lb(\"app-edit-profile\",r,I,{},{},[]),A=u(\"95zI\"),M=u(\"9opb\"),O=u(\"apKv\"),_=u(\"B4/3\"),U=u(\"quoV\");u.d(n,\"EditProfilePageModuleNgFactory\",function(){return q});var q=e.mb(a,[],function(l){return e.wb([e.xb(512,e.j,e.bb,[[8,[s.a,D]],[3,e.j],e.x]),e.xb(4608,m.k,m.j,[e.u,[2,m.q]]),e.xb(4608,f.g,f.g,[]),e.xb(4608,A.a,A.a,[e.z,e.g]),e.xb(4608,M.a,M.a,[A.a,e.j,e.q]),e.xb(4608,O.a,O.a,[A.a,e.j,e.q]),e.xb(1073742336,m.b,m.b,[]),e.xb(1073742336,f.f,f.f,[]),e.xb(1073742336,f.a,f.a,[]),e.xb(1073742336,_.a,_.a,[]),e.xb(1073742336,y.o,y.o,[[2,y.u],[2,y.m]]),e.xb(1073742336,U.a,U.a,[]),e.xb(1073742336,a,a,[]),e.xb(1024,y.k,function(){return[[{path:\"\",component:r}]]},[])])})}}]);","extractedComments":[]}