{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{WI49:function(t,e,n){\"use strict\";var r=n(\"wj3C\"),o=n.n(r),i=\"firebasestorage.googleapis.com\",a=12e4,s=6e4,u=-9007199254740991,c=function(){function t(t,e){this.code_=h(t),this.message_=\"Firebase Storage: \"+e,this.serverResponse_=null,this.name_=\"FirebaseError\"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return h(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,\"name\",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"code\",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"message\",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"serverResponse\",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),l={UNKNOWN:\"unknown\",OBJECT_NOT_FOUND:\"object-not-found\",BUCKET_NOT_FOUND:\"bucket-not-found\",PROJECT_NOT_FOUND:\"project-not-found\",QUOTA_EXCEEDED:\"quota-exceeded\",UNAUTHENTICATED:\"unauthenticated\",UNAUTHORIZED:\"unauthorized\",RETRY_LIMIT_EXCEEDED:\"retry-limit-exceeded\",INVALID_CHECKSUM:\"invalid-checksum\",CANCELED:\"canceled\",INVALID_EVENT_NAME:\"invalid-event-name\",INVALID_URL:\"invalid-url\",INVALID_DEFAULT_BUCKET:\"invalid-default-bucket\",NO_DEFAULT_BUCKET:\"no-default-bucket\",CANNOT_SLICE_BLOB:\"cannot-slice-blob\",SERVER_FILE_WRONG_SIZE:\"server-file-wrong-size\",NO_DOWNLOAD_URL:\"no-download-url\",INVALID_ARGUMENT:\"invalid-argument\",INVALID_ARGUMENT_COUNT:\"invalid-argument-count\",APP_DELETED:\"app-deleted\",INVALID_ROOT_OPERATION:\"invalid-root-operation\",INVALID_FORMAT:\"invalid-format\",INTERNAL_ERROR:\"internal-error\"};function h(t){return\"storage/\"+t}function p(){return new c(l.UNKNOWN,\"An unknown error occurred, please check the error payload for server response.\")}function f(){return new c(l.CANCELED,\"User canceled the upload/download.\")}function d(){return new c(l.CANNOT_SLICE_BLOB,\"Cannot slice blob for upload. Please retry the upload.\")}function _(t,e,n){return new c(l.INVALID_ARGUMENT,\"Invalid argument in `\"+e+\"` at index \"+t+\": \"+n)}function v(){return new c(l.APP_DELETED,\"The Firebase app was deleted.\")}function m(t,e){return new c(l.INVALID_FORMAT,\"String does not match format '\"+t+\"': \"+e)}function b(t){throw new c(l.INTERNAL_ERROR,\"Internal error: \"+t)}var g={RAW:\"raw\",BASE64:\"base64\",BASE64URL:\"base64url\",DATA_URL:\"data_url\"};function y(t){switch(t){case g.RAW:case g.BASE64:case g.BASE64URL:case g.DATA_URL:return;default:throw\"Expected one of the event types: [\"+g.RAW+\", \"+g.BASE64+\", \"+g.BASE64URL+\", \"+g.DATA_URL+\"].\"}}var R=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function E(t,e){switch(t){case g.RAW:return new R(w(e));case g.BASE64:case g.BASE64URL:return new R(T(t,e));case g.DATA_URL:return new R(function(t){var e=new U(t);return e.base64?T(g.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw m(g.DATA_URL,\"Malformed data URL.\")}return w(e)}(e.rest)}(e),function(t){return new U(t).contentType}(e))}throw p()}function w(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var o=r,i=t.charCodeAt(++n);e.push(240|(r=65536|(1023&o)<<10|1023&i)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function T(t,e){switch(t){case g.BASE64:var n=-1!==e.indexOf(\"-\"),r=-1!==e.indexOf(\"_\");if(n||r)throw m(t,\"Invalid character '\"+(n?\"-\":\"_\")+\"' found: is it base64url encoded?\");break;case g.BASE64URL:var o=-1!==e.indexOf(\"+\"),i=-1!==e.indexOf(\"/\");if(o||i)throw m(t,\"Invalid character '\"+(o?\"+\":\"/\")+\"' found: is it base64 encoded?\");e=e.replace(/-/g,\"+\").replace(/_/g,\"/\")}var a;try{a=atob(e)}catch(c){throw m(t,\"Invalid character found\")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var U=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw m(g.DATA_URL,\"Must be formatted 'data:[<mediatype>][;base64],<data>\");var n,r=e[1]||null;null!=r&&(this.base64=(n=r).length>=\";base64\".length&&\";base64\"===n.substring(n.length-\";base64\".length),this.contentType=this.base64?r.substring(0,r.length-\";base64\".length):r),this.rest=t.substring(t.indexOf(\",\")+1)}}(),A={STATE_CHANGED:\"state_changed\"},N={RUNNING:\"running\",PAUSING:\"pausing\",PAUSED:\"paused\",SUCCESS:\"success\",CANCELING:\"canceling\",CANCELED:\"canceled\",ERROR:\"error\"},C={RUNNING:\"running\",PAUSED:\"paused\",SUCCESS:\"success\",CANCELED:\"canceled\",ERROR:\"error\"};function O(t){switch(t){case N.RUNNING:case N.PAUSING:case N.CANCELING:return C.RUNNING;case N.PAUSED:return C.PAUSED;case N.SUCCESS:return C.SUCCESS;case N.CANCELED:return C.CANCELED;case N.ERROR:default:return C.ERROR}}function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function k(t,e){for(var n in t)S(t,n)&&e(n,t[n])}function I(t){if(null==t)return{};var e={};return k(t,function(t,n){e[t]=n}),e}function P(t){return new Promise(t)}function x(t){return Promise.resolve(t)}function L(t){return null!=t}function D(t){return void 0!==t}function M(t){return\"function\"==typeof t}function W(t){return\"object\"==typeof t}function B(t){return W(t)&&null!==t}function G(t){return\"string\"==typeof t||t instanceof String}function j(t){return q()&&t instanceof Blob}function q(){return\"undefined\"!=typeof Blob}var F=function(t){return t[t.NO_ERROR=0]=\"NO_ERROR\",t[t.NETWORK_ERROR=1]=\"NETWORK_ERROR\",t[t.ABORT=2]=\"ABORT\",t}({}),H=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=F.NO_ERROR,this.sendPromise_=P(function(e,n){t.xhr_.addEventListener(\"abort\",function(n){t.errorCode_=F.ABORT,e(t)}),t.xhr_.addEventListener(\"error\",function(n){t.errorCode_=F.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener(\"load\",function(n){e(t)})})}return t.prototype.send=function(t,e,n,r){var o=this;if(this.sent_)throw b(\"cannot .send() more than once\");return this.sent_=!0,this.xhr_.open(e,t,!0),L(r)&&k(r,function(t,e){o.xhr_.setRequestHeader(t,e.toString())}),L(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw b(\"cannot .getErrorCode() before sending\");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw b(\"cannot .getStatus() before sending\");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw b(\"cannot .getResponseText() before sending\");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){L(this.xhr_.upload)&&this.xhr_.upload.addEventListener(\"progress\",t)},t.prototype.removeUploadProgressListener=function(t){L(this.xhr_.upload)&&this.xhr_.upload.removeEventListener(\"progress\",t)},t}(),z=function(){function t(){}return t.prototype.createXhrIo=function(){return new H},t}();function X(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return W(n=e)&&!Array.isArray(n)?e:null}var V=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,\"path\",{get:function(){return this.path_},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return\"/b/\"+t(this.bucket)+\"/o/\"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return\"/b/\"+encodeURIComponent(this.bucket)+\"/o\"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,\"\")}if(\"\"===n.path)return n;throw new c(l.INVALID_DEFAULT_BUCKET,\"Invalid default bucket '\"+e+\"'.\")},t.makeFromUrl=function(e){for(var n=null,r=new RegExp(\"^gs://([A-Za-z0-9.\\\\-_]+)(/(.*))?$\",\"i\"),o=i.replace(/[.]/g,\"\\\\.\"),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){\"/\"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp(\"^https?://\"+o+\"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\\\-_]+)/o(/([^?#]*).*)?$\",\"i\"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],s=0;s<a.length;s++){var u=a[s],h=u.regex.exec(e);if(h){var p=h[u.indices.path];p||(p=\"\"),n=new t(h[u.indices.bucket],p),u.postModify(n);break}}if(null==n)throw function(t){return new c(l.INVALID_URL,\"Invalid URL '\"+t+\"'.\")}(e);return n},t}();function K(t){var e=t.lastIndexOf(\"/\",t.length-2);return-1===e?t:t.slice(e+1)}function Z(t){return\"https://\"+i+\"/v0\"+t}function J(t){var e=encodeURIComponent,n=\"?\";return k(t,function(t,r){var o=e(t)+\"=\"+e(r);n=n+o+\"&\"}),n=n.slice(0,-1)}function Q(t,e){return e}var Y=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Q}}(),$=null;function tt(t,e,n){var r=X(e);return null===r?null:function(t,e,n){for(var r={type:\"file\"},o=n.length,i=0;i<o;i++){var a=n[i];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,\"ref\",{get:function(){var n=new V(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function et(t,e){for(var n={},r=e.length,o=0;o<r;o++){var i=e[o];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}function nt(t){if(!t||!W(t))throw\"Expected Metadata object.\";for(var e in t){var n=t[e];if(\"customMetadata\"===e){if(!W(n))throw\"Expected object for 'customMetadata' mapping.\"}else if(B(n))throw\"Mapping for '\"+e+\"' cannot be an object.\"}}function rt(t,e,n){for(var r=e.length,o=e.length,i=0;i<e.length;i++)if(e[i].optional){r=i;break}var a,s,u,h;if(!(r<=n.length&&n.length<=o))throw(a=r)===(s=o)?(u=a,h=1===a?\"argument\":\"arguments\"):(u=\"between \"+a+\" and \"+s,h=\"arguments\"),new c(l.INVALID_ARGUMENT_COUNT,\"Invalid argument count in `\"+t+\"`: Expected \"+u+\" \"+h+\", received \"+n.length+\".\");for(i=0;i<n.length;i++)try{e[i].validator(n[i])}catch(p){throw p instanceof Error?_(i,t,p.message):_(i,t,p)}}var ot=function(){return function(t,e){var n=this;this.validator=function(e){n.optional&&!D(e)||t(e)},this.optional=!!e}}();function it(t,e){function n(t){if(!G(t))throw\"Expected string.\"}var r,o,i;return t?(o=n,i=t,r=function(t){o(t),i(t)}):r=n,new ot(r,e)}function at(t){return new ot(nt,t)}function st(){return new ot(function(t){if(!(function(t){return\"number\"==typeof t||t instanceof Number}(t)&&t>=0))throw\"Expected a number 0 or greater.\"})}function ut(t,e){return new ot(function(e){if(!(null===e||L(e)&&e instanceof Object))throw\"Expected an Object.\";null!=t&&t(e)},e)}function ct(t){return new ot(function(t){if(null!==t&&!M(t))throw\"Expected a Function.\"},t)}function lt(){return\"undefined\"!=typeof BlobBuilder?BlobBuilder:\"undefined\"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}var ht=function(){function t(t,e){var n=0,r=\"\";j(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(j(this.data_)){var r=(i=e,a=n,(o=this.data_).webkitSlice?o.webkitSlice(i,a):o.mozSlice?o.mozSlice(i,a):o.slice?o.slice(i,a):null);return null===r?null:new t(r)}var o,i,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(q()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=lt();if(void 0!==n){for(var r=new n,o=0;o<t.length;o++)r.append(t[o]);return r.getBlob()}if(q())return new Blob(t);throw Error(\"This browser doesn't seem to support creating Blobs\")}).apply(null,r))}var o=e.map(function(t){return G(t)?E(g.RAW,t).data:t.data_}),i=0;o.forEach(function(t){i+=t.byteLength});var a=new Uint8Array(i),s=0;return o.forEach(function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]}),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function pt(t,e){return-1!==t.indexOf(e)}var ft=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function dt(t){if(!t)throw p()}function _t(t,e){return function(n,r){var o=tt(t,r,e);return dt(null!==o),o}}function vt(t){return function(e,n){var r;return(r=401===e.getStatus()?new c(l.UNAUTHENTICATED,\"User is not authenticated, please authenticate using Firebase Authentication and try again.\"):402===e.getStatus()?new c(l.QUOTA_EXCEEDED,\"Quota for bucket '\"+t.bucket+\"' exceeded, please view quota on https://firebase.google.com/pricing/.\"):403===e.getStatus()?new c(l.UNAUTHORIZED,\"User does not have permission to access '\"+t.path+\"'.\"):n).setServerResponseProp(n.serverResponseProp()),r}}function mt(t){var e=vt(t);return function(n,r){var o=e(n,r);return 404===n.getStatus()&&(o=new c(l.OBJECT_NOT_FOUND,\"Object '\"+t.path+\"' does not exist.\")),o.setServerResponseProp(r.serverResponseProp()),o}}function bt(t,e,n){var r=Z(e.fullServerUrl()),o=t.maxOperationRetryTime(),i=new ft(r,\"GET\",_t(t,n),o);return i.errorHandler=mt(e),i}function gt(t,e,n){var r=I(n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||\"application/octet-stream\"}(0,e)),r}var yt=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function Rt(t,e){var n;try{n=t.getResponseHeader(\"X-Goog-Upload-Status\")}catch(r){dt(!1)}return dt(pt(e||[\"active\"],n)),n}var Et=function(){return function(t,e,n){if(M(t)||L(e)||L(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}}(),wt=function(){return function(t,e,n,r,o,i){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=o,this.ref=i}}();function Tt(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];x(!0).then(function(){t.apply(null,e)})}}var Ut=function(){function t(t,e,n,r,o,i){var a=this;void 0===i&&(i=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=o,this.metadata_=i,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=N.RUNNING,this.errorHandler_=function(t){a.request_=null,a.chunkMultiplier_=1,t.codeEquals(l.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=t,a.transition_(N.ERROR))},this.metadataErrorHandler_=function(t){a.request_=null,t.codeEquals(l.CANCELED)?a.completeTransitions_():(a.error_=t,a.transition_(N.ERROR))},this.promise_=P(function(t,e){a.resolve_=t,a.reject_=e,a.start_()}),this.promise_.then(null,function(){})}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n,r){t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===N.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then(function(n){switch(e.state_){case N.RUNNING:t(n);break;case N.CANCELING:e.transition_(N.CANCELED);break;case N.PAUSING:e.transition_(N.PAUSED)}})},t.prototype.createResumable_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,o){var i=e.bucketOnlyServerUrl(),a=gt(e,r,o),s={name:a.fullPath},u=Z(i),c={\"X-Goog-Upload-Protocol\":\"resumable\",\"X-Goog-Upload-Command\":\"start\",\"X-Goog-Upload-Header-Content-Length\":r.size(),\"X-Goog-Upload-Header-Content-Type\":a.contentType,\"Content-Type\":\"application/json; charset=utf-8\"},l=et(a,n),h=t.maxUploadRetryTime(),p=new ft(u,\"POST\",function(t,e){var n;Rt(t);try{n=t.getResponseHeader(\"X-Goog-Upload-URL\")}catch(r){dt(!1)}return dt(G(n)),n},h);return p.urlParams=s,p.headers=c,p.body=l,p.errorHandler=vt(e),p}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()},t.errorHandler_)})},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_(function(n){var r=function(e,n,r,o){var i=t.authWrapper_.maxUploadRetryTime(),a=new ft(r,\"POST\",function(t,e){var n,r=Rt(t,[\"active\",\"final\"]);try{n=t.getResponseHeader(\"X-Goog-Upload-Size-Received\")}catch(a){dt(!1)}var i=parseInt(n,10);return dt(!isNaN(i)),new yt(i,o.size(),\"final\"===r)},i);return a.headers={\"X-Goog-Upload-Command\":\"query\"},a.errorHandler=vt(n),a}(0,t.location_,e,t.blob_),o=t.authWrapper_.makeRequest(r,n);t.request_=o,o.getPromise().then(function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()},t.errorHandler_)})},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new yt(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(o){var i;try{i=function(t,e,n,r,o,i,a,s){var u=new yt(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new c(l.SERVER_FILE_WRONG_SIZE,\"Server recorded incorrect upload file size, please retry the upload.\");var h=u.total-u.current,p=h;o>0&&(p=Math.min(p,o));var f=u.current,_={\"X-Goog-Upload-Command\":p===h?\"upload, finalize\":\"upload\",\"X-Goog-Upload-Offset\":u.current},v=r.slice(f,f+p);if(null===v)throw d();var m=e.maxUploadRetryTime(),b=new ft(n,\"POST\",function(t,n){var o,a=Rt(t,[\"active\",\"final\"]),s=u.current+p,c=r.size();return o=\"final\"===a?_t(e,i)(t,n):null,new yt(s,c,\"final\"===a,o)},m);return b.headers=_,b.body=v.uploadData(),b.progressCallback=s||null,b.errorHandler=vt(t),b}(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(s){return t.error_=s,void t.transition_(N.ERROR)}var a=t.authWrapper_.makeRequest(i,o);t.request_=a,a.getPromise().then(function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(N.SUCCESS)):t.completeTransitions_()},t.errorHandler_)})},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_(function(e){var n=bt(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.transition_(N.SUCCESS)},t.metadataErrorHandler_)})},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,o){var i=e.bucketOnlyServerUrl(),a={\"X-Goog-Upload-Protocol\":\"multipart\"},s=function(){for(var t=\"\",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a[\"Content-Type\"]=\"multipart/related; boundary=\"+s;var u=gt(e,r,o),c=et(u,n),l=ht.getBlob(\"--\"+s+\"\\r\\nContent-Type: application/json; charset=utf-8\\r\\n\\r\\n\"+c+\"\\r\\n--\"+s+\"\\r\\nContent-Type: \"+u.contentType+\"\\r\\n\\r\\n\",r,\"\\r\\n--\"+s+\"--\");if(null===l)throw d();var h={name:u.fullPath},p=Z(i),f=t.maxUploadRetryTime(),_=new ft(p,\"POST\",_t(t,n),f);return _.urlParams=h,_.headers=a,_.body=l.uploadData(),_.errorHandler=vt(e),_}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(N.SUCCESS)},t.errorHandler_)})},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case N.CANCELING:case N.PAUSING:this.state_=t,null!==this.request_&&this.request_.cancel();break;case N.RUNNING:var e=this.state_===N.PAUSED;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case N.PAUSED:this.state_=t,this.notifyObservers_();break;case N.CANCELED:this.error_=f(),this.state_=t,this.notifyObservers_();break;case N.ERROR:case N.SUCCESS:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case N.PAUSING:this.transition_(N.PAUSED);break;case N.CANCELING:this.transition_(N.CANCELED);break;case N.RUNNING:this.start_()}},Object.defineProperty(t.prototype,\"snapshot\",{get:function(){var t=O(this.state_);return new wt(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){void 0===e&&(e=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0);var o=\"Expected a function or an Object with one of `next`, `error`, `complete` properties.\",i=ct(!0).validator,a=ut(null,!0).validator;function s(t){try{return void i(t)}catch(e){}try{if(a(t),!(D(t.next)||D(t.error)||D(t.complete)))throw\"\";return}catch(e){throw o}}rt(\"on\",[it(function(e){if(t!==A.STATE_CHANGED)throw\"Expected one of the event types: [\"+A.STATE_CHANGED+\"].\"}),ut(s,!0),ct(!0),ct(!0)],arguments);var u=this;function c(t){return function(e,n,o){null!==t&&rt(\"on\",t,arguments);var i=new Et(e,n,r);return u.addObserver_(i),function(){u.removeObserver_(i)}}}var l=[ut(function(t){if(null===t)throw o;s(t)}),ct(!0),ct(!0)];return D(e)||D(n)||D(r)?c(null)(e,n,r):c(l)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e,n;-1!==(n=(e=this.observers_).indexOf(t))&&e.splice(n,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),Array.prototype.slice.call(this.observers_).forEach(function(e){t.notifyObserver_(e)})},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(O(this.state_)){case C.SUCCESS:Tt(this.resolve_.bind(null,this.snapshot))();break;case C.CANCELED:case C.ERROR:Tt(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(O(this.state_)){case C.RUNNING:case C.PAUSED:null!==t.next&&Tt(t.next.bind(t,this.snapshot))();break;case C.SUCCESS:null!==t.complete&&Tt(t.complete.bind(t))();break;case C.CANCELED:case C.ERROR:null!==t.error&&Tt(t.error.bind(t,this.error_))();break;default:null!==t.error&&Tt(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){rt(\"resume\",[],arguments);var t=this.state_===N.PAUSED||this.state_===N.PAUSING;return t&&this.transition_(N.RUNNING),t},t.prototype.pause=function(){rt(\"pause\",[],arguments);var t=this.state_===N.RUNNING;return t&&this.transition_(N.PAUSING),t},t.prototype.cancel=function(){rt(\"cancel\",[],arguments);var t=this.state_===N.RUNNING||this.state_===N.PAUSING;return t&&this.transition_(N.CANCELING),t},t}(),At=function(){function t(t,e){this.authWrapper=t,this.location=e instanceof V?e:V.makeFromUrl(e)}return t.prototype.toString=function(){return rt(\"toString\",[],arguments),\"gs://\"+this.location.bucket+\"/\"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return function(){if($)return $;var t=[];t.push(new Y(\"bucket\")),t.push(new Y(\"generation\")),t.push(new Y(\"metageneration\")),t.push(new Y(\"name\",\"fullPath\",!0));var e=new Y(\"name\");e.xform=function(t,e){return function(t){return!G(t)||t.length<2?t:K(t=t)}(e)},t.push(e);var n=new Y(\"size\");return n.xform=function(t,e){return L(e)?+e:e},t.push(n),t.push(new Y(\"timeCreated\")),t.push(new Y(\"updated\")),t.push(new Y(\"md5Hash\",null,!0)),t.push(new Y(\"cacheControl\",null,!0)),t.push(new Y(\"contentDisposition\",null,!0)),t.push(new Y(\"contentEncoding\",null,!0)),t.push(new Y(\"contentLanguage\",null,!0)),t.push(new Y(\"contentType\",null,!0)),t.push(new Y(\"metadata\",\"customMetadata\",!0)),$=t}()},t.prototype.child=function(t){rt(\"child\",[it()],arguments);var e=function(t,e){var n=e.split(\"/\").filter(function(t){return t.length>0}).join(\"/\");return 0===t.length?n:t+\"/\"+n}(this.location.path,t),n=new V(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,\"parent\",{get:function(){var t=function(t){if(0==t.length)return null;var e=t.lastIndexOf(\"/\");return-1===e?\"\":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new V(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"root\",{get:function(){var t=new V(this.location.bucket,\"\");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"bucket\",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"fullPath\",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"name\",{get:function(){return K(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"storage\",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),rt(\"put\",[new ot(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||q()&&t instanceof Blob))throw\"Expected Blob or File.\"}),at(!0)],arguments),this.throwIfRoot_(\"put\"),new Ut(this,this.authWrapper,this.location,this.mappings(),new ht(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=g.RAW),rt(\"putString\",[it(),it(y,!0),at(!0)],arguments),this.throwIfRoot_(\"putString\");var r=E(e,t),o=I(n);return!L(o.contentType)&&L(r.contentType)&&(o.contentType=r.contentType),new Ut(this,this.authWrapper,this.location,this.mappings(),new ht(r.data,!0),o)},t.prototype.delete=function(){rt(\"delete\",[],arguments),this.throwIfRoot_(\"delete\");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=function(t,e){var n=Z(e.fullServerUrl()),r=t.maxOperationRetryTime(),o=new ft(n,\"DELETE\",function(t,e){},r);return o.successCodes=[200,204],o.errorHandler=mt(e),o}(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.getMetadata=function(){rt(\"getMetadata\",[],arguments),this.throwIfRoot_(\"getMetadata\");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=bt(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.updateMetadata=function(t){rt(\"updateMetadata\",[at()],arguments),this.throwIfRoot_(\"updateMetadata\");var e=this;return this.authWrapper.getAuthToken().then(function(n){var r=function(t,e,n,r){var o=Z(e.fullServerUrl()),i=et(n,r),a=t.maxOperationRetryTime(),s=new ft(o,\"PATCH\",_t(t,r),a);return s.headers={\"Content-Type\":\"application/json; charset=utf-8\"},s.body=i,s.errorHandler=mt(e),s}(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()})},t.prototype.getDownloadURL=function(){rt(\"getDownloadURL\",[],arguments),this.throwIfRoot_(\"getDownloadURL\");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=function(t,e,n){var r=Z(e.fullServerUrl()),o=t.maxOperationRetryTime(),i=new ft(r,\"GET\",function(t,e){return function(n,r){var o=tt(t,r,e);return dt(null!==o),function(t,e){var n=X(r);if(null===n)return null;if(!G(n.downloadTokens))return null;var o=n.downloadTokens;if(0===o.length)return null;var i=encodeURIComponent;return o.split(\",\").map(function(e){var n=t.fullPath;return Z(\"/b/\"+i(t.bucket)+\"/o/\"+i(n))+J({alt:\"media\",token:e})})[0]}(o)}}(t,n),o);return i.errorHandler=mt(e),i}(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise().then(function(t){if(null===t)throw new c(l.NO_DOWNLOAD_URL,\"The given file does not have any download URLs.\");return t})})},t.prototype.throwIfRoot_=function(t){if(\"\"===this.location.path)throw function(t){return new c(l.INVALID_ROOT_OPERATION,\"The operation '\"+t+\"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').\")}(t)},t}(),Nt=function(){function t(t){this.promise_=function(t){return Promise.reject(t)}(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){void 0===t&&(t=!1)},t}(),Ct=function(){function t(){this.map_={},this.id_=u}return t.prototype.addRequest=function(t){var e=this.id_;this.id_++,this.map_[e]=t;var n=this;function r(){delete n.map_[e]}t.getPromise().then(r,r)},t.prototype.clear=function(){k(this.map_,function(t,e){e&&e.cancel(!0)}),this.map_={}},t}(),Ot=function(){function t(e,n,r,o,i){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var u=this.app_.options;L(u)&&(this.bucket_=t.extractBucket_(u))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=i,this.service_=o,this.maxOperationRetryTime_=a,this.maxUploadRetryTime_=s,this.requestMap_=new Ct}return t.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:V.makeFromBucketSpec(e).bucket},t.prototype.getAuthToken=function(){return null!==this.app_&&L(this.app_.INTERNAL)&&L(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(t){return null!==t?t.accessToken:null},function(t){return null}):x(null)},t.prototype.bucket=function(){if(this.deleted_)throw v();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new Nt(v());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}(),St=function(){function t(t,e,n,r,o,i,a,s,u,c,l){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=o.slice(),this.additionalRetryCodes_=i.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l;var h=this;this.promise_=P(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,o=t.resolve_,i=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());D(s)?o(s):o()}catch(u){i(u)}else null!==a?((r=p()).setServerResponseProp(a.getResponseText()),i(t.errorCallback_?t.errorCallback_(a,r):r)):i(r=n.canceled?t.appDelete_?v():f():new c(l.RETRY_LIMIT_EXCEEDED,\"Max retry time for operation exceeded, please try again.\"))}this.canceled_?e(0,new kt(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,o=null,i=!1,a=0;function s(){return 2===a}var u=!1;function c(){u||(u=!0,e.apply(null,arguments))}function l(e){o=setTimeout(function(){o=null,t(h,s())},e)}function h(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];u||(t?c.apply(null,arguments):s()||i?c.apply(null,arguments):(r<64&&(r*=2),1===a?(a=2,e=0):e=1e3*(r+Math.random()),l(e)))}var p=!1;function f(t){p||(p=!0,u||(null!==o?(t||(a=2),clearTimeout(o),l(0)):t||(a=1)))}return l(0),setTimeout(function(){i=!0,f(!0)},n),f}(function(e,n){if(n)e(!1,new kt(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(o),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(o),t.pendingXhr_=null;var r=(n=n).getErrorCode()===F.NO_ERROR,i=n.getStatus();if(r&&!t.isRetryStatusCode_(i)){var a=pt(t.successCodes_,i);e(!0,new kt(a,n))}else{var s=n.getErrorCode()===F.ABORT;e(!1,new kt(!1,null,s))}})}function o(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}},e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=pt([408,429],t),r=pt(this.additionalRetryCodes_,t);return e||n||r},t}(),kt=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function It(t,e,n){var r=J(t.urlParams),i=t.url+r,a=I(t.headers);return function(t,e){null!==e&&e.length>0&&(t.Authorization=\"Firebase \"+e)}(a,e),function(t){t[\"X-Firebase-Storage-Version\"]=\"webjs/\"+(void 0!==o.a?o.a.SDK_VERSION:\"AppManager\")}(a),new St(i,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n)}var Pt=function(){function t(t,e,n){if(this.bucket_=null,this.authWrapper_=new Ot(t,function(t,e){return new At(t,e)},It,this,e),this.app_=t,null!=n)this.bucket_=V.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new V(r,\"\"))}this.internals_=new xt(this)}return t.prototype.ref=function(t){if(rt(\"ref\",[it(function(t){if(/^[A-Za-z]+:\\/\\//.test(t))throw\"Expected child path but got a URL, use refFromURL instead.\"},!0)],arguments),null==this.bucket_)throw new Error(\"No Storage Bucket defined in Firebase Options.\");var e=new At(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},t.prototype.refFromURL=function(t){return rt(\"refFromURL\",[it(function(t){if(!/^[A-Za-z]+:\\/\\//.test(t))throw\"Expected full URL but got a child path, use ref instead.\";try{V.makeFromUrl(t)}catch(e){throw\"Expected valid full URL but got an invalid one.\"}},!1)],arguments),new At(this.authWrapper_,t)},Object.defineProperty(t.prototype,\"maxUploadRetryTime\",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){rt(\"setMaxUploadRetryTime\",[st()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},t.prototype.setMaxOperationRetryTime=function(t){rt(\"setMaxOperationRetryTime\",[st()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,\"app\",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"INTERNAL\",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),xt=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),x(void 0)},t}();o.a.INTERNAL.registerService(\"storage\",function(t,e,n){return new Pt(t,new z,n)},{TaskState:C,TaskEvent:A,StringFormat:g,Storage:Pt,Reference:At},void 0,!0)}}]);","extractedComments":[]}