import{a as t}from"./chunk-647a6bad.js";let e;function n(t,n,r,o){const i=function(t){if(void 0===e)try{const n=Object.defineProperty({},"passive",{get:()=>{e=!0}});t.addEventListener("optsTest",()=>{},n)}catch(t){e=!1}return!!e}(t)?{capture:!!o.capture,passive:!!o.passive}:!!o.capture;let c,s;return t.__zone_symbol__addEventListener?(c="__zone_symbol__addEventListener",s="__zone_symbol__removeEventListener"):(c="addEventListener",s="removeEventListener"),t[c](n,r,i),()=>{t[s](n,r,i)}}const r=2e3;function o(t){return t instanceof Document?t:t.ownerDocument}function i(e){const i=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},e),u=i.canStart,l=i.onWillStart,d=i.onStart,m=i.onEnd,f=i.notCaptured,v=i.onMove,p=i.threshold,X=i.queue,y={type:"pan",startX:0,startY:0,startTimeStamp:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,timeStamp:0,event:void 0,data:void 0},Y=function(t,e,i,c,s){let a,u,l,d,m,f,v,p=0;function X(o){p=Date.now()+r,e(o)&&(!u&&i&&(u=n(t,"touchmove",i,s)),l||(l=n(t,"touchend",Y,s)),d||(d=n(t,"touchcancel",Y,s)))}function y(r){p>Date.now()||e(r)&&(!f&&i&&(f=n(o(t),"mousemove",i,s)),v||(v=n(o(t),"mouseup",h,s)))}function Y(t){S(),c&&c(t)}function h(t){_(),c&&c(t)}function S(){u&&u(),l&&l(),d&&d(),u=l=d=void 0}function _(){f&&f(),v&&v(),f=v=void 0}function g(){S(),_()}function b(e){e?(a&&a(),m&&m(),a=m=void 0,g()):(a||(a=n(t,"touchstart",X,s)),m||(m=n(t,"mousedown",y,s)))}return{setDisabled:b,stop:g,destroy:function(){b(!0),c=i=e=void 0}}}(i.el,function(t){const e=a(t);return!(g||!b)&&(s(t,y),y.startX=y.currentX,y.startY=y.currentY,y.startTimeStamp=y.timeStamp=e,y.velocityX=y.velocityY=y.deltaX=y.deltaY=0,y.event=t,(!u||!1!==u(y))&&(S.release(),!!S.start()&&(g=!0,0===p?E():(h.start(y.startX,y.startY),!0))))},function(t){_?!D&&b&&(D=!0,c(y,t),X.write(w)):(c(y,t),h.detect(y.currentX,y.currentY)&&(h.isGesture()&&E()||(x(),Y.stop(),f&&f(y))))},T,{capture:!1}),h=function(t,e,n){const r=i.maxAngle*(Math.PI/180),o="x"===i.direction,c=Math.cos(r),s=e*e;let a=0,u=0,l=!1,d=0;return{start(t,e){a=t,u=e,d=0,l=!0},detect(t,e){if(!l)return!1;const n=t-a,r=e-u,i=n*n+r*r;if(i<s)return!1;const m=Math.sqrt(i),f=(o?n:r)/m;return d=f>c?1:f<-c?-1:0,l=!1,!0},isGesture:()=>0!==d,getDirection:()=>d}}(0,i.threshold),S=t.createGesture({name:e.gestureName,priority:e.gesturePriority,disableScroll:e.disableScroll});let _=!1,g=!1,b=!0,D=!1;function w(){_&&(D=!1,v&&v(y))}function E(){return!(S&&!S.capture()||(_=!0,b=!1,y.startX=y.currentX,y.startY=y.currentY,y.startTimeStamp=y.timeStamp,l?l(y).then(L):L(),0))}function L(){d&&d(y),b=!0}function x(){_=!1,g=!1,D=!1,b=!0,S.release()}function T(t){const e=_,n=b;x(),n&&(c(y,t),e?m&&m(y):f&&f(y))}return{setDisabled(t){t&&_&&T(void 0),Y.setDisabled(t)},destroy(){S.destroy(),Y.destroy()}}}function c(t,e){if(!e)return;const n=t.currentX,r=t.currentY,o=t.timeStamp;s(e,t);const i=t.currentX,c=t.currentY,u=(t.timeStamp=a(e))-o;if(u>0&&u<100){const e=(c-r)/u;t.velocityX=(i-n)/u*.7+.3*t.velocityX,t.velocityY=.7*e+.3*t.velocityY}t.deltaX=i-t.startX,t.deltaY=c-t.startY,t.event=e}function s(t,e){let n=0,r=0;if(t){const e=t.changedTouches;if(e&&e.length>0){const t=e[0];n=t.clientX,r=t.clientY}else void 0!==t.pageX&&(n=t.pageX,r=t.pageY)}e.currentX=n,e.currentY=r}function a(t){return t.timeStamp||Date.now()}export{i as createGesture};